<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- адаптив -->
    <title>Розрахунок часу та здачі</title>
    <!-- Favicon для браузера -->
    <link rel="icon" href="images/face.png" sizes="32x32" type="image/png">

    <!-- Apple Touch Icon для iPhone/iPad -->
    <link rel="apple-touch-icon" href="images/faceIOS.png" sizes="180x180">

    <!-- Manifest для Android / PWA -->
    <link rel="manifest" href="/manifest.json">

    <!-- Колір теми для Chrome/Android -->
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="css/styles.css">

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BE1TQJ347V"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-BE1TQJ347V');

  // ----- Всі події запускаємо тільки після завантаження DOM -----
  document.addEventListener("DOMContentLoaded", function() {

      // Подія натискання кнопки "Розрахувати"
      document.getElementById("rozr").addEventListener("click", function () {
          gtag("event", "calculate_click", {
              event_category: "interaction",
              event_label: "Кнопка Розрахувати"
          });
      });

      // Подія введення часу
      document.getElementById("timeInputCalc").addEventListener("input", function () {
          gtag("event", "time_input", {
              event_category: "form",
              event_label: "Ввід часу",
              value: this.value
          });
      });
  });

  // ---- Подія помилки у форматі часу ----
  function validateTimeInputCalc() {
      const input = document.getElementById("timeInputCalc").value.trim();
      const errorDiv = document.getElementById("timeInputCalcError");

      if (!/^\d{1,2}[:.\-]\d{2}$/.test(input)) {

          gtag("event", "time_input_error", {
              event_category: "error",
              event_label: "Неправильний формат часу",
              value: input
          });

          errorDiv.textContent = "Некоректний час";
          return false;
      }

      errorDiv.textContent = "";
      return true;
  }
</script>

</head>
<body>
    <!-- Блок : Розрахунок здачі/явки -->
    <header class="main-header">
        <div class="header-content">
            <h2 class="site-title">Розрахунок явки та здачі локомотивної бригади</h2>
        </div>
        <label class="top_lab">Введіть час прибуття або відправлення (год.хв)</label>
        <input type="text" id="timeInputCalc" placeholder="наприклад 5.45" oninput="validateTimeInputCalc()">
        <div id="timeInputCalcError" style="color: red; font-size: 14px; min-height: 18px;"></div>
        <!-- Кількість вагонів: -->
        <div class="radio-group">
            <fieldset id="kil_vag">
                <legend>
                    <p>Кількість вагонів:</p>
                </legend>
                <label><input type="radio" name="wagons" value="4" checked> 4</label>
                <label><input type="radio" name="wagons" value="6"> 6</label>
                <label><input type="radio" name="wagons" value="8"> 8</label>
                <label><input type="radio" name="wagons" value="10"> 10</label>
            </fieldset>
        </div>
        <!-- Станція -->
        <div class="radio-group">
            <fieldset>
                <legend>
                    <p>Станція:</p>
                </legend>
                <label><input type="radio" name="city" value="chernihiv" checked> Чернігів</label>
                <label><input type="radio" name="city" value="nizhin"> Ніжин</label>
                <label><input type="radio" name="city" value="konotop"> Конотоп</label>
            </fieldset>
        </div>
        <!-- Операція -->
        <div class="radio-group" id="operationGroup">
            <fieldset id="kil_vag">
                <legend>
                    <p>Операція:</p>
                </legend>
                <label id="yavkaLabel"><input type="radio" name="operation" value="yavka"> Явка</label>
                <label><input type="radio" name="operation" value="zdacha"> Здача</label>
            </fieldset>
        </div>
        <!-- МІСЦЕ -->
        <div class="radio-group">
            <fieldset>
                <legend>
                    <p>Місце:</p>
                </legend>
                <label><input type="radio" name="place" value="from_stay" checked> На станнції</label>
                <label><input type="radio" name="place" value="from_depo"> Депо</label>
                <label><input type="radio" name="place" value="depo_21"> Депо по 21 колії</label>
            </fieldset>
        </div>
        <!-- Мед коміссія -->
        <div class="radio-group">
            <fieldset>
                <legend>
                    <p>Мед:</p>
                </legend>
                <label id="yavkaLabel"><input type="radio" name="med" value="yavka" checked> З мед коміссією</label>
                <label><input type="radio" name="med" value="zdacha"> Без мед коміссії</label>
            </fieldset>
        </div>
        <!--Дія-->
        <div class="radio-group">
            <fieldset>
                <legend>
                    <p>Дія</p>
                </legend>

                <label><input type="radio" name="action" value="to_stay"> У відстій</label>
                <label><input type="radio" name="action" value="from_stay"> З відстою</label>
                <!-- на станції -->
                <label><input type="radio" name="action" value="from_go"> Від лок бригади на прохід</label>
                <label><input type="radio" name="action" value="to_go"> Лок бригаді на прохід</label>

                <!-- у депо -->

                <label><input type="radio" name="action" value="from_repairsDepo"> З ремонту </label>
                <label><input type="radio" name="action" value="to_repairsDepo"> У ремонт </label>

                <!-- ніжин -->
                <label><input type="radio" name="action" value="from_staySt31"> З відстою 31-34 колії</label>
                <label><input type="radio" name="action" value="to_stay31_34"> У відстій 31-34 колії</label>
                <label><input type="radio" name="action" value="from_go345"> Від лок бригади на прохід 3,4,5
                    колія</label>
                <label><input type="radio" name="action" value="to_go345"> Лок бригаді на прохід 3,4,5 колія</label>

                <label><input type="radio" name="action" value="from_go67"> Від лок бригади на прохід 6,7 колія</label>
                <label><input type="radio" name="action" value="to_go67"> Лок бригаді на прохід 6,7 колія</label>
            </fieldset>
        </div>
        <!-- Виїзд на станцію -->
        <div id="station_yesNo" class="radio-group">
            <fieldset>
                <legend>
                    <p>Подальша дія:</p>
                </legend>
                <label><input type="radio" name="next_action" value="station_yes" checked>З виїздом на станцію</label>
                <label><input type="radio" name="next_action" value="station_no"> Без виїзда на станцію</label>
            </fieldset>
        </div>
        <br>
        <button id="rozr" onclick="calculate()">Розрахувати</button>
        <div id="results">
            <div id="result_yavka" class="res-line yavka"></div>
            <div id="result_pr" class="res-line pr"></div>
            <div id="result_kp" class="res-line kp"></div>
            <div id="result_zd" class="res-line zd"></div>
            <div id="result_end" class="res-line end"></div>
        </div>
        <section style="display: none;" class="console">
            <fieldset>
                <legend>
                    <p>Info:</p>
                </legend>
                <div class="output_field">
                    <div class="output">вивід інформації</div>
                </div>
            </fieldset>
        </section>
    </header>
    <!-- Операції з часом  -->
    <hr class="hr-divider">
    <main>
        <h3>Операції з часом (год.хв)</h3>
        <label>Час (формат год.хв, можна . , : -):</label>
        <input type="text" id="timeInputSimple" placeholder="наприклад 5.45" oninput="validateTimeInputSimple()">
        <div id="timeInputSimpleError" style="color: red; font-size: 14px; min-height: 18px;"></div>
        <label>Хвилини:</label>
        <input type="number" id="minutesInputSimple" placeholder="наприклад 115">
        <button style="margin-bottom: 5px;" onclick="subtractTimeSimple()">Відняти хвилини</button>
        <button style="margin-bottom: 5px;" onclick="addTimeSimple()">Додати хвилини</button>
        <h3 class="res_simple">Результат:</h3>
        <div id="resultSimple"></div>
    </main>
    <hr class="hr-divider">
    <div id="table">
        <img src="images/time.jpg">
    </div>
    <p class="dubina">Таблицю склав: Дубина Дмитро Григорович.</p>
    <section class="attachments">
        <h3>Файли для завантаження:</h3>
        <ul>
            <li><a href="files/2024%20ВІДОМІСТЬ%20.xls" target="_blank">Відомість Excel файл</a></li>
            <li><a href="files/2024%20ВІДОМІСТЬ.pdf" target="_blank">Відомість PDF файл</a></li>

        </ul>
    </section>
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-left">
                <img src="images/face.png" alt="Лого" class="footer-logo">
                <span class="footer-title">Розробник:</span>
            </div>
            <div class="footer-center">
                <span>&copy; 2025&nbsp;&nbsp;&nbsp; &nbsp; </span>
                <span>Email: <a href="mailto:bartash.e@gmail.com">zenuaa@outlook.com</a></span>
            </div>
        </div>
    </footer>
    <script src="js/js.js"></script>
</body>
</html>